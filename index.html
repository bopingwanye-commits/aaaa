<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>面接練習ツール</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 24px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      text-align: center;
    }
    h1 {
      margin-top: 0;
      font-size: 24px;
    }
    .interviewer {
      margin: 16px 0;
    }
    .interviewer img {
      max-width: 200px;
      height: auto;
    }
    .question-box {
      margin: 24px 0;
      padding: 16px 20px;
      border-radius: 12px;
      background: #fafafa;
      border: 1px solid #e0e0e0;
      min-height: 80px;
      font-size: 18px;
      line-height: 1.6;
      white-space: pre-line;
    }
    .status {
      font-size: 14px;
      color: #666;
      margin-bottom: 16px;
    }
    .buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 20px;
      border-radius: 999px;
      border: none;
      font-size: 15px;
      cursor: pointer;
      background: #4a90e2;
      color: #fff;
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.1s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);
    }
    button.secondary {
      background: #9e9e9e;
    }
    button:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }
    button:not(:disabled):hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
    }
    .notice {
      font-size: 13px;
      color: #888;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>面接練習ツール</h1>
    <p>質問が音声で流れたら、声に出して回答してみましょう。<br>
    答え終わったら「回答終了」ボタンを押すと、次の質問に進みます。</p>

    <div class="interviewer">
      <!-- ここを、添付イラストのファイル名に変更してください -->
      <img src="interviewer.png" alt="面接官のイラスト">
    </div>

    <div class="status" id="status">まだ面接は開始していません。</div>
    <div class="question-box" id="questionBox">
      「面接スタート」ボタンを押すと、質問がランダムな順番で出題されます。
    </div>

    <div class="buttons">
      <button id="startBtn">面接スタート</button>
      <button id="nextBtn" style="display:none;">回答終了（次の質問へ）</button>
      <button id="repeatBtn" class="secondary" style="display:none;">もう一度質問を聞く</button>
    </div>

    <div class="notice" id="notice"></div>
  </div>

  <script>
    // 質問一覧
    const questions = [
      "転職を考えたきっかけ、なぜACEに入社したか",
      "現所属で何をしているか（今Qのミッション）",
      "人からどんな人と思われているか、それはなぜか",
      "自分の弱み、苦手なこと、それを改善するアクション",
      "どういうときに一番テンションがあがるか",
      "過去しんどい、きつかったこと",
      "引き続きACE（CA）で働きたい理由",
      "中長期のキャリア、野望",
      "ACEの課題、足りない部分",
      "大さんおよび上長から求められていること",
      "新卒一年目は何をしていたのか？なぜそこに入りたいと思ったのか？",
      "あなたの強みは何ですか？",
      "どうやってミッションを達成していますか？"
    ];

    let shuffledQuestions = [];
    let currentIndex = -1;

    const questionBox = document.getElementById("questionBox");
    const statusEl = document.getElementById("status");
    const startBtn = document.getElementById("startBtn");
    const nextBtn = document.getElementById("nextBtn");
    const repeatBtn = document.getElementById("repeatBtn");
    const noticeEl = document.getElementById("notice");

    // 質問のシャッフル（全て出題されるように並び替え）
    function shuffleQuestions() {
      shuffledQuestions = questions
        .map(q => ({ value: q, sortKey: Math.random() }))
        .sort((a, b) => a.sortKey - b.sortKey)
        .map(obj => obj.value);
      currentIndex = -1;
    }

    // 質問を読み上げ
    function speakQuestion(text) {
      if (!("speechSynthesis" in window)) {
        noticeEl.textContent = "※このブラウザでは音声再生（読み上げ機能）が使えません。テキストで練習してください。";
        return;
      }

      noticeEl.textContent = "";
      window.speechSynthesis.cancel();

      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "ja-JP";
      utterance.rate = 1.0;
      utterance.pitch = 1.0;

      window.speechSynthesis.speak(utterance);
    }

    // 次の質問を表示
    function showNextQuestion() {
      currentIndex++;

      if (currentIndex < shuffledQuestions.length) {
        const qText = shuffledQuestions[currentIndex];
        questionBox.textContent = "Q" + (currentIndex + 1) + "： " + qText;
        statusEl.textContent = "質問 " + (currentIndex + 1) + " / " + shuffledQuestions.length;
        speakQuestion(qText);

        repeatBtn.style.display = "inline-block";
      } else {
        // 全ての質問が終わった
        questionBox.textContent = "お疲れさまでした！全ての質問が終了しました。";
        statusEl.textContent = "";
        nextBtn.style.display = "none";
        repeatBtn.style.display = "none";

        startBtn.textContent = "もう一度最初から練習する";
        startBtn.style.display = "inline-block";
      }
    }

    // イベント設定
    startBtn.addEventListener("click", () => {
      shuffleQuestions();
      startBtn.style.display = "none";
      nextBtn.style.display = "inline-block";
      showNextQuestion();
    });

    nextBtn.addEventListener("click", () => {
      showNextQuestion();
    });

    repeatBtn.addEventListener("click", () => {
      if (currentIndex >= 0 && currentIndex < shuffledQuestions.length) {
        speakQuestion(shuffledQuestions[currentIndex]);
      }
    });

    // ページ離脱時に読み上げ停止
    window.addEventListener("beforeunload", () => {
      if ("speechSynthesis" in window) {
        window.speechSynthesis.cancel();
      }
    });
  </script>
</body>
</html>
